{"Version":"2019-10-30","StartAction":"daf04e72-3ed9-4513-a2b6-173e4d8ff5f8","Metadata":{"entryPointPosition":{"x":-424.8,"y":-1118.4},"ActionMetadata":{"5cf30e74-ef10-479b-b21e-127e5b0c4f8d":{"position":{"x":3416.8,"y":-1507.2}},"0c743676-9c03-4d92-a27f-b5ab390b2a6a":{"position":{"x":3163.2,"y":-1503.2},"parameters":{"QueueId":{"displayName":"BasicQueue"}},"queue":{"text":"BasicQueue"}},"daf04e72-3ed9-4513-a2b6-173e4d8ff5f8":{"position":{"x":-321.6,"y":-1137.6}},"6fc0927c-4f21-4472-bbe4-74e2bacc99c7":{"position":{"x":3159.2,"y":-1132}},"b83db6fd-80b4-47aa-9f63-dadb435c87b4":{"position":{"x":-90.4,"y":-1152.8},"dynamicParams":[]},"Play Transfer Message":{"position":{"x":1898.4,"y":-1178.4},"isFriendlyName":true},"050ce9f3-d70b-4a84-ac8b-7b4a4c74c0c1":{"position":{"x":978.4,"y":-1027.2}},"86dd71d0-2ed2-40c0-99cc-120533e49701":{"position":{"x":3432.8,"y":-1047.2}},"db2b1a5c-c747-4c66-ac62-927b94e00950":{"position":{"x":141.6,"y":-1158.4}},"c5c7f811-983b-4dfc-a9c8-1241f4df5792":{"position":{"x":673.6,"y":-1023.2}},"643bca0e-2e92-4179-9338-6663f3e99c53":{"position":{"x":692,"y":-1301.6},"parameters":{"Attributes":{"prescriptionCode":{"useDynamic":true}}},"dynamicParams":["prescriptionCode"]},"Invoke Verification Bot":{"position":{"x":404,"y":-1177.6},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Prod","useLexBotDropdown":true,"lexV2BotName":"PrescriptionBot"}}},"dynamicMetadata":{"x-amz-lex:audio:start-timeout-ms:*:*":false,"x-amz-lex:audio:end-timeout-ms:*:*":false,"x-amz-lex:allow-interrupt:*:*":false,"x-amz-lex:audio:max-length-ms:*:*":false},"useLexBotDropdown":true,"lexV2BotName":"PrescriptionBot","lexV2BotAliasName":"Prod","conditionMetadata":[{"id":"6a32925c-3a03-47b4-b319-7a423da9104a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"PrescriptionCodeIntent"},{"id":"86e5ea72-bf72-4f7f-87a2-189de7b3e0d4","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"FallbackIntent"}]},"Is Prescription Available":{"position":{"x":1964,"y":-1498.4},"isFriendlyName":true,"conditions":[],"conditionMetadata":[{"id":"669ea82d-10b0-405a-b85a-df931781b9b2","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"Play Prescription Code Not Found Message":{"position":{"x":1625.6,"y":-1172},"isFriendlyName":true},"Play Prescription Code Found Message":{"position":{"x":1636,"y":-1448.8},"isFriendlyName":true},"ffeb2d8e-339a-4474-8d92-7f25bca8e54c":{"position":{"x":972,"y":-1311.2},"parameters":{"LambdaFunctionARN":{"displayName":"RetrievePrescriptionInfo"}},"dynamicMetadata":{"PrescriptionID ":false}},"274438cd-a294-4a2a-bb55-c50ca080a9f0":{"position":{"x":1410.4,"y":-1321.6},"conditions":[],"conditionMetadata":[{"id":"347fdd3b-dec5-41fa-aac3-33ab05eb906f","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]},"e6f9e3ab-40c0-4088-9d4e-2960f3326ffd":{"position":{"x":1195.2,"y":-1312.8},"parameters":{"Attributes":{"pickUp":{"useDynamic":true},"medicationName":{"useDynamic":true},"statusCode":{"useDynamic":true}}},"dynamicParams":["pickUp","medicationName","statusCode"]},"0145947a-6f84-40ee-ba4a-d49b30cc6642":{"position":{"x":3379.2,"y":-1256}},"92171bf9-00eb-458c-8488-0dca0dd4db20":{"position":{"x":2898.4,"y":-1484}},"Not ready for pickup.":{"position":{"x":2310.4,"y":-1328.8},"isFriendlyName":true},"Ready for Pickup.":{"position":{"x":2276,"y":-1564.8},"isFriendlyName":true},"e2e70637-3ae3-47b5-be91-7ccc47d3f548":{"position":{"x":3745.6,"y":-1468.8}},"06e01b82-6b9b-4026-87ac-709f93a43d53":{"position":{"x":2872.8,"y":-1220.8},"conditionMetadata":[{"id":"07690d1f-8c9c-4162-a1c9-37938a924014","value":"1"},{"id":"f3fce55e-62e2-46d4-8eec-59970210975c","value":"2"}]},"Invoke General Purpose Bot":{"position":{"x":2607.2,"y":-1524},"isFriendlyName":true,"parameters":{"LexV2Bot":{"AliasArn":{"displayName":"Prod","useLexBotDropdown":true,"lexV2BotName":"GeneralPurposeBot"}}},"dynamicMetadata":{"x-amz-lex:audio:start-timeout-ms:*:*":false,"x-amz-lex:audio:end-timeout-ms:*:*":false,"x-amz-lex:allow-interrupt:*:*":false},"useLexBotDropdown":true,"lexV2BotName":"GeneralPurposeBot","lexV2BotAliasName":"Prod","conditionMetadata":[{"id":"fe3c2cb1-3e0a-4b96-8798-868ed6342d25","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"MainMenuIntent"},{"id":"020a56df-b956-4fec-a2e6-a749fef2679c","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"RepeatIntent"},{"id":"7802bec2-7ff7-4a36-945c-6170bbcf51ac","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"FallbackIntent"}]},"a0231846-7268-4231-ac10-4bb541bfc116":{"position":{"x":2916.8,"y":-1692.8},"parameters":{"ContactFlowId":{"displayName":"Pharmacy_Center_Main"}},"ContactFlow":{"text":"Pharmacy_Center_Main"}}},"Annotations":[],"name":"prescriptions_refills.","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"5cf30e74-ef10-479b-b21e-127e5b0c4f8d","Type":"TransferContactToQueue","Transitions":{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","Errors":[{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","ErrorType":"QueueAtCapacity"},{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:992382814914:instance/592b03e5-5333-4228-86df-1e673e715d64/queue/5cf37683-8825-4336-bb53-437e78a79dc9"},"Identifier":"0c743676-9c03-4d92-a27f-b5ab390b2a6a","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"5cf30e74-ef10-479b-b21e-127e5b0c4f8d","Errors":[{"NextAction":"5cf30e74-ef10-479b-b21e-127e5b0c4f8d","ErrorType":"NoMatchingError"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"daf04e72-3ed9-4513-a2b6-173e4d8ff5f8","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"b83db6fd-80b4-47aa-9f63-dadb435c87b4"}},{"Parameters":{"LoopCount":"2"},"Identifier":"6fc0927c-4f21-4472-bbe4-74e2bacc99c7","Type":"Loop","Transitions":{"NextAction":"86dd71d0-2ed2-40c0-99cc-120533e49701","Conditions":[{"NextAction":"0145947a-6f84-40ee-ba4a-d49b30cc6642","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"86dd71d0-2ed2-40c0-99cc-120533e49701","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Attributes":{"flowName":"prescriptions_refills"},"TargetContact":"Current"},"Identifier":"b83db6fd-80b4-47aa-9f63-dadb435c87b4","Type":"UpdateContactAttributes","Transitions":{"NextAction":"db2b1a5c-c747-4c66-ac62-927b94e00950","Errors":[{"NextAction":"db2b1a5c-c747-4c66-ac62-927b94e00950","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Please hold and I will get someone on the line to help you."},"Identifier":"Play Transfer Message","Type":"MessageParticipant","Transitions":{"NextAction":"0c743676-9c03-4d92-a27f-b5ab390b2a6a","Errors":[{"NextAction":"0c743676-9c03-4d92-a27f-b5ab390b2a6a","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"I'm sorry, I was not able to understand you."},"Identifier":"050ce9f3-d70b-4a84-ac8b-7b4a4c74c0c1","Type":"MessageParticipant","Transitions":{"NextAction":"Play Transfer Message","Errors":[{"NextAction":"Play Transfer Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"It seems like I'm having some problems. Please call again at a later time. Thank you."},"Identifier":"86dd71d0-2ed2-40c0-99cc-120533e49701","Type":"MessageParticipant","Transitions":{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","Errors":[{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Hello and welcome to Example Pharmacy's prescription refill service. Please have the prescription number you wish to refill ready."},"Identifier":"db2b1a5c-c747-4c66-ac62-927b94e00950","Type":"MessageParticipant","Transitions":{"NextAction":"Invoke Verification Bot","Errors":[{"NextAction":"Invoke Verification Bot","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"c5c7f811-983b-4dfc-a9c8-1241f4df5792","Type":"Loop","Transitions":{"NextAction":"050ce9f3-d70b-4a84-ac8b-7b4a4c74c0c1","Conditions":[{"NextAction":"Invoke Verification Bot","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"050ce9f3-d70b-4a84-ac8b-7b4a4c74c0c1","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Attributes":{"prescriptionCode":"$.Lex.Slots.prescriptionCode"},"TargetContact":"Current"},"Identifier":"643bca0e-2e92-4179-9338-6663f3e99c53","Type":"UpdateContactAttributes","Transitions":{"NextAction":"ffeb2d8e-339a-4474-8d92-7f25bca8e54c","Errors":[{"NextAction":"ffeb2d8e-339a-4474-8d92-7f25bca8e54c","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Please state your 8-digit prescription code.","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:992382814914:bot-alias/8LCOF069XC/Z5M9KZ6VZO"},"LexSessionAttributes":{"x-amz-lex:audio:start-timeout-ms:*:*":"3000","x-amz-lex:audio:end-timeout-ms:*:*":"3000","x-amz-lex:allow-interrupt:*:*":"true","x-amz-lex:audio:max-length-ms:*:*":"15000"}},"Identifier":"Invoke Verification Bot","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"86dd71d0-2ed2-40c0-99cc-120533e49701","Conditions":[{"NextAction":"643bca0e-2e92-4179-9338-6663f3e99c53","Condition":{"Operator":"Equals","Operands":["PrescriptionCodeIntent"]}},{"NextAction":"c5c7f811-983b-4dfc-a9c8-1241f4df5792","Condition":{"Operator":"Equals","Operands":["FallbackIntent"]}}],"Errors":[{"NextAction":"86dd71d0-2ed2-40c0-99cc-120533e49701","ErrorType":"NoMatchingCondition"},{"NextAction":"86dd71d0-2ed2-40c0-99cc-120533e49701","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.pickUp"},"Identifier":"Is Prescription Available","Type":"Compare","Transitions":{"NextAction":"Not ready for pickup.","Conditions":[{"NextAction":"Ready for Pickup.","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"Not ready for pickup.","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Text":"I'm sorry, I could not find your prescription code."},"Identifier":"Play Prescription Code Not Found Message","Type":"MessageParticipant","Transitions":{"NextAction":"Play Transfer Message","Errors":[{"NextAction":"Play Transfer Message","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"Thanks, I found your prescription code."},"Identifier":"Play Prescription Code Found Message","Type":"MessageParticipant","Transitions":{"NextAction":"Is Prescription Available","Errors":[{"NextAction":"Is Prescription Available","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:992382814914:function:RetrievePrescriptionInfo","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"PrescriptionID ":"$.Attributes.prescriptionCode"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"ffeb2d8e-339a-4474-8d92-7f25bca8e54c","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"e6f9e3ab-40c0-4088-9d4e-2960f3326ffd","Errors":[{"NextAction":"e6f9e3ab-40c0-4088-9d4e-2960f3326ffd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Attributes.statusCode"},"Identifier":"274438cd-a294-4a2a-bb55-c50ca080a9f0","Type":"Compare","Transitions":{"NextAction":"Play Prescription Code Not Found Message","Conditions":[{"NextAction":"Play Prescription Code Found Message","Condition":{"Operator":"Equals","Operands":["200"]}}],"Errors":[{"NextAction":"Play Prescription Code Not Found Message","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"Attributes":{"pickUp":"$.External.Pickup","medicationName":"$.External.MedicationName","statusCode":"$.External.statusCode"},"TargetContact":"Current"},"Identifier":"e6f9e3ab-40c0-4088-9d4e-2960f3326ffd","Type":"UpdateContactAttributes","Transitions":{"NextAction":"274438cd-a294-4a2a-bb55-c50ca080a9f0","Errors":[{"NextAction":"274438cd-a294-4a2a-bb55-c50ca080a9f0","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"I'm sorry that was not a valid input. Please try again."},"Identifier":"0145947a-6f84-40ee-ba4a-d49b30cc6642","Type":"MessageParticipant","Transitions":{"NextAction":"Invoke General Purpose Bot","Errors":[{"NextAction":"Invoke General Purpose Bot","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"92171bf9-00eb-458c-8488-0dca0dd4db20","Type":"Loop","Transitions":{"NextAction":"0c743676-9c03-4d92-a27f-b5ab390b2a6a","Conditions":[{"NextAction":"Is Prescription Available","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"0c743676-9c03-4d92-a27f-b5ab390b2a6a","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"Text":"According to our records, your prescription $.Attributes.medicationName is not ready to be picked up. If you have more questions, please contact the pharmacy center at 1800-222-1111. "},"Identifier":"Not ready for pickup.","Type":"MessageParticipant","Transitions":{"NextAction":"Invoke General Purpose Bot","Errors":[{"NextAction":"Invoke General Purpose Bot","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"According to our records, your prescription $.Attributes.medicationName is ready to be picked up. If you have more questions, please contact the pharmacy center at 1800-222-1111. "},"Identifier":"Ready for Pickup.","Type":"MessageParticipant","Transitions":{"NextAction":"Invoke General Purpose Bot","Errors":[{"NextAction":"Invoke General Purpose Bot","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"StoreInput":"False","InputTimeLimitSeconds":"8","SSML":"I didn't catch that. Press 1 to return to the main menu, 2 to hear it all over again. Otherwise if you're done, just hang up."},"Identifier":"06e01b82-6b9b-4026-87ac-709f93a43d53","Type":"GetParticipantInput","Transitions":{"NextAction":"6fc0927c-4f21-4472-bbe4-74e2bacc99c7","Conditions":[{"NextAction":"a0231846-7268-4231-ac10-4bb541bfc116","Condition":{"Operator":"Equals","Operands":["1"]}},{"NextAction":"92171bf9-00eb-458c-8488-0dca0dd4db20","Condition":{"Operator":"Equals","Operands":["2"]}}],"Errors":[{"NextAction":"6fc0927c-4f21-4472-bbe4-74e2bacc99c7","ErrorType":"InputTimeLimitExceeded"},{"NextAction":"6fc0927c-4f21-4472-bbe4-74e2bacc99c7","ErrorType":"NoMatchingCondition"},{"NextAction":"6fc0927c-4f21-4472-bbe4-74e2bacc99c7","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Text":"\"You can say \"Repeat that\", or to do something else, say \"Main Menu\" or if that's all you need, feel free to hang up.\"","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:992382814914:bot-alias/F7ZSXPAJAO/WCMBHXO8CH"},"LexSessionAttributes":{"x-amz-lex:audio:start-timeout-ms:*:*":"3000","x-amz-lex:audio:end-timeout-ms:*:*":"2000","x-amz-lex:allow-interrupt:*:*":"true"}},"Identifier":"Invoke General Purpose Bot","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"06e01b82-6b9b-4026-87ac-709f93a43d53","Conditions":[{"NextAction":"a0231846-7268-4231-ac10-4bb541bfc116","Condition":{"Operator":"Equals","Operands":["MainMenuIntent"]}},{"NextAction":"92171bf9-00eb-458c-8488-0dca0dd4db20","Condition":{"Operator":"Equals","Operands":["RepeatIntent"]}},{"NextAction":"06e01b82-6b9b-4026-87ac-709f93a43d53","Condition":{"Operator":"Equals","Operands":["FallbackIntent"]}}],"Errors":[{"NextAction":"06e01b82-6b9b-4026-87ac-709f93a43d53","ErrorType":"NoMatchingCondition"},{"NextAction":"06e01b82-6b9b-4026-87ac-709f93a43d53","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ContactFlowId":"arn:aws:connect:us-east-1:992382814914:instance/592b03e5-5333-4228-86df-1e673e715d64/contact-flow/db2d513c-d7d9-496c-b27c-649b36cf6b05"},"Identifier":"a0231846-7268-4231-ac10-4bb541bfc116","Type":"TransferToFlow","Transitions":{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","Errors":[{"NextAction":"e2e70637-3ae3-47b5-be91-7ccc47d3f548","ErrorType":"NoMatchingError"}]}}]}